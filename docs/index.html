<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>What the Package Does (Title Case) â€¢ phewasHelper</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="What the Package Does (Title Case)">
<meta property="og:description" content="More about what it does (maybe more than one line)
    Use four spaces when indenting paragraphs within the Description.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">phewasHelper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="phewashelper" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#phewashelper" class="anchor"></a>phewasHelper</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of phewasHelper is to provide a set of simple lightweight helper functions for working with Phecode and Phewas data.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>And the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"nstrayer/phewas_helper"</span>)</a></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>We will use a sample set of simulated PheWas data with phecodes to demonstrate the functions.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(phewasHelper)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(phewas_data)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; # A tibble: 6 x 2</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt;    code    val</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; 1  323.  0.949</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; 2  250. -2.82 </span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; 3  362. -1.84 </span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; 4  721  -1.93 </span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; 5  363. -3.36 </span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; 6  527.  2.97</span></a></code></pre></div>
<div id="normalizing-phecodes" class="section level3">
<h3 class="hasAnchor">
<a href="#normalizing-phecodes" class="anchor"></a>Normalizing phecodes</h3>
<p>Phecodes show up in about a million different formats. In our demo data the phecodes have been converted to a numeric value. This would be an issue if we tried to harmonize with data that stored the phecodes in a string. The function <code>normalize_phecodes</code> is designed to fix this problem. It takes any phecode array and coerces it to a standard zero-padded string.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">phewas_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">fixed_code =</span> <span class="kw"><a href="reference/normalize_phecode.html">normalize_phecode</a></span>(code)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>()</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; # A tibble: 6 x 3</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;    code    val fixed_code</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; 1  323.  0.949 323.20    </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; 2  250. -2.82  250.11    </span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; 3  362. -1.84  362.20    </span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; 4  721  -1.93  721.00    </span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; 5  363. -3.36  363.40    </span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; 6  527.  2.97  527.20</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co"># Update our original data with normalized phecodes</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16">phewas_data &lt;-<span class="st"> </span>phewas_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">code =</span> <span class="kw"><a href="reference/normalize_phecode.html">normalize_phecode</a></span>(code))</a></code></pre></div>
</div>
<div id="getting-phecode-information" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-phecode-information" class="anchor"></a>Getting phecode information</h3>
<p>Another issue that is commonly encountered in PheWas results is wanting to know what exactly a code is. The functions <code><a href="reference/get_phecode_info.html">get_phecode_info()</a></code> and <code><a href="reference/join_phecode_info.html">join_phecode_info()</a></code> help with that.</p>
<p><code><a href="reference/get_phecode_info.html">get_phecode_info()</a></code> is the simpler of the two. It takes as input an array of phecodes and returns an array of the desired information, either description or category. This is useful for adding individual columns to a dataframe.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">phewas_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">descript =</span> <span class="kw"><a href="reference/get_phecode_info.html">get_phecode_info</a></span>(code, <span class="st">'description'</span>),</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">         <span class="dt">category =</span> <span class="kw"><a href="reference/get_phecode_info.html">get_phecode_info</a></span>(code, <span class="st">'category'</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>()</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; # A tibble: 6 x 4</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;   code      val descript                                       category         </span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;                                          &lt;chr&gt;            </span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; 1 323.20  0.949 Acute (transverse) myelitis                    neurological     </span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; 2 250.11 -2.82  Type 1 diabetes with ketoacidosis              endocrine/metaboâ€¦</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; 3 362.20 -1.84  Degeneration of macula and posterior pole of â€¦ sense organs     </span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; 4 721.00 -1.93  Spondylosis and allied disorders               musculoskeletal  </span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; 5 363.40 -3.36  Choroidal degenerations                        sense organs     </span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; 6 527.20  2.97  Sialoadenitis                                  digestive</span></a></code></pre></div>
<p>For more a more complete labeling of phecode information the function <code><a href="reference/join_phecode_info.html">join_phecode_info()</a></code> modifies a passsed dataframe by appending description, category, and category number columns.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">phewas_data &lt;-<span class="st"> </span>phewas_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/join_phecode_info.html">join_phecode_info</a></span>(<span class="dt">phecode_column =</span> <span class="st">'code'</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(phewas_data)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; # A tibble: 6 x 5</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;   phecode    val description                       category      category_number</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;                             &lt;chr&gt;                   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; 1 323.20   0.949 Acute (transverse) myelitis       neurological                6</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; 2 250.11  -2.82  Type 1 diabetes with ketoacidosis endocrine/meâ€¦               3</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; 3 362.20  -1.84  Degeneration of macula and posteâ€¦ sense organs                7</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; 4 721.00  -1.93  Spondylosis and allied disorders  musculoskeleâ€¦              14</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; 5 363.40  -3.36  Choroidal degenerations           sense organs                7</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 6 527.20   2.97  Sialoadenitis                     digestive                  10</span></a></code></pre></div>
</div>
<div id="coloring-phewas-plots" class="section level3">
<h3 class="hasAnchor">
<a href="#coloring-phewas-plots" class="anchor"></a>Coloring PheWas plots</h3>
<p>Manhattan plots are commonly made of phewas results. Frequently the colors of the plots points are encoded by the categories. The default color palletes in ggplot2 and base-plot are not great and custom palletes like R color-brewer donâ€™t give you enough colors to work with all the categories. To deal with this <code><a href="reference/category_colors.html">category_colors()</a></code> returns a mapping of phecode category to colors that can be used easily in your plots.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">phewas_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> phecode, <span class="dt">y =</span> val, <span class="dt">color =</span> category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="reference/category_colors.html">category_colors</a></span>()) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">axis.ticks.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>(),</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">        <span class="dt">axis.text.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>(),</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">        <span class="dt">panel.grid.major.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>(),</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">        <span class="dt">panel.grid.minor.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>())</a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-3-1.png" width="100%"></p>
<p>If just the color pallete is needed for <code>ggplot</code> then the function <code><a href="reference/scale_color_phecode.html">scale_color_phecode()</a></code> makes this even easier.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">phewas_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> phecode, <span class="dt">y =</span> val, <span class="dt">color =</span> category)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/scale_color_phecode.html">scale_color_phecode</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">axis.ticks.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>(),</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">        <span class="dt">axis.text.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>(),</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">        <span class="dt">panel.grid.major.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>(),</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">        <span class="dt">panel.grid.minor.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>())</a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-4-1.png" width="100%"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>What license is it under?</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>The package maintainer <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
